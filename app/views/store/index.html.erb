<% content_for :title, "Home - cloudmarket" %>


<div class="row">
  <div class="large-8 small-12 columns large-centered">

    <form class="custom">
      <input type="search" class="large" placeholder="¿Qué producto buscas?" ng-model="query">
      <div class="row">
        <div class="large-6 columns">
          <input type="search" class="large" placeholder="¿Dónde?" ng-model="lugar">
        </div>
        <div class="large-6 columns">
          <label for="customDropdown">Orden:</label>
          <select id="customDropdown" ng-model="orderProp" class="form-control">
            <option value="title">Alfabético</option>
            <option value="category">Categoría</option>
          </select>
        </div>
      </div>
    </form>

    <ul ui-sortable ng-model="products" class="no-bullet listado" >
      <li ng-repeat="product in products | filter:query | orderBy:orderProp | filter:lugar" class="{{product.category}}">
        <div class="title-info">
          <h4>{{product.title}} <a href="#" data title="añadir a mi alacena" data-reveal-id="clone"><span class="icon-copy"></span> <span class="add-word">Agregar</span> </a></h4>
          <h6 class="subheader"><small>{{ product.updated_at | date:'MMMM dd, yyyy' }}</small></h6>
          <div class="prices">
            <span class="market" ng-bind="product.price | currency:'$'"></span>
            <span class="supermarket" ng-bind="product.highprice | currency:'$'"></span>
          </div>
        </div>
        <div class="more-info">
          <span class="left">{{product.quantity}} KILO</span> <span class="the-category {{product.category}}" ng-bind="product.category"></span>
          <div class="text-center place">
            <strong ng-bind-html-unsafe="product.storeName"></strong>
            <small ng-bind="product.adress"></small>
          </div>
        </div>
		<!-- modal -->
		<div id="clone" class="reveal-modal">
			<h3 class="subheader">Guardalo en tu alacena</h3>
			<form action="#">
				<div class="row">
					<div class="large-9 columns">
						<label>Dónde:</label>
						<input type="text" placeholder="Escribe el lugar" value="{{product.storeName}}">
					</div>
					<div class="large-3 columns">
						<label>Precio:</label>
						<input type="number" value="{{product.price}}">
					</div>
				</div>
				<input type="text" class="button success" value="Guardar"/>
			</form>
			<a class="close-reveal-modal">&#215;</a>
		</div>
      </li>
    </ul>
	
      <% if current_user && current_user.admin? %>
	  <pre>{{products | json}}</pre>
	  <% end %>
  </div>
</div>

